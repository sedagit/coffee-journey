{{ define "main" }}

<section class="taxonomy-page">
    <div class="container">
        <header class="page-header">
            <h1>{{ .Title }}</h1>
            <p>共 {{ len .Pages }} 家咖啡店</p>
        </header>
        
        <div class="cafes-grid">
            {{ range .Pages }}
            <article class="cafe-card">
                <a href="{{ .Permalink }}">
                    {{ if .Params.featured_image }}
                    <div class="cafe-image">
                        <img src="{{ .Params.featured_image }}" alt="{{ .Title }}" loading="lazy">
                        {{ if .Params.rating }}
                        <div class="cafe-rating">
                            <span class="stars">{{ partial "star-rating.html" .Params.rating }}</span>
                        </div>
                        {{ end }}
                    </div>
                    {{ else }}
                    <div class="cafe-image placeholder">
                        <span>☕</span>
                    </div>
                    {{ end }}
                    
                    <div class="cafe-content">
                        <h3>{{ .Title }}</h3>
                        
                        <div class="cafe-meta">
                            {{ with .Params.price_range }}
                            <span class="price">{{ . }}</span>
                            {{ end }}
                            {{ with .Params.styles }}
                            <span class="style">{{ . }}</span>
                            {{ end }}
                        </div>
                        
                        {{ if .Summary }}
                        <p class="cafe-excerpt">{{ .Summary | truncate 100 }}</p>
                        {{ end }}
                        
                        {{ if .Params.tags }}
                        <div class="cafe-tags">
                            {{ range first 3 .Params.tags }}
                            <span class="tag">#{{ . }}</span>
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>
                </a>
            </article>
            {{ end }}
        </div>
    </div>
</section>

{{ end }}
