{{ define "main" }}

{{- /* Hero Section */ -}}
<section class="hero">
    <div class="hero-content">
        <h1 class="hero-title">{{ .Site.Params.hero.title }}</h1>
        <p class="hero-subtitle">{{ .Site.Params.hero.subtitle }}</p>
        <a href="#latest-cafes" class="btn-primary">é–‹å§‹æ¢ç´¢</a>
    </div>
</section>

{{- /* Stats Section */ -}}
<section class="stats">
    <div class="container">
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-number">{{ len (where .Site.RegularPages "Type" "cafes") }}</div>
                <div class="stat-label">å®¶å’–å•¡åº—</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">{{ len .Site.Taxonomies.regions }}</div>
                <div class="stat-label">å€‹åŸå¸‚</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">{{ len .Site.Taxonomies.tags }}</div>
                <div class="stat-label">ç¨®é¢¨æ ¼</div>
            </div>
        </div>
    </div>
</section>

{{- /* Latest Cafes */ -}}
<section id="latest-cafes" class="latest-cafes">
    <div class="container">
        <h2 class="section-title">æœ€æ–°æ¢è¨ª</h2>
        
        <div class="cafes-grid">
            {{ range first 6 (where .Site.RegularPages "Type" "cafes") }}
            <article class="cafe-card">
                <a href="{{ .Permalink }}">
                    {{ if .Params.featured_image }}
                    <div class="cafe-image">
                        <img src="{{ .Params.featured_image }}" alt="{{ .Title }}" loading="lazy">
                        <div class="cafe-rating">
                            <span class="stars">{{ partial "star-rating.html" .Params.rating }}</span>
                        </div>
                    </div>
                    {{ else }}
                    <div class="cafe-image placeholder">
                        <span>â˜•</span>
                    </div>
                    {{ end }}
                    
                    <div class="cafe-content">
                        <h3>{{ .Title }}</h3>
                        
                        <div class="cafe-meta">
                            {{ with .Params.regions }}
                            <span class="region">ğŸ“ {{ index . 0 }}</span>
                            {{ end }}
                            {{ with .Params.price_range }}
                            <span class="price">{{ . }}</span>
                            {{ end }}
                        </div>
                        
                        <p class="cafe-excerpt">{{ .Summary | truncate 100 }}</p>
                        
                        <div class="cafe-tags">
                            {{ range first 2 .Params.tags }}
                            <span class="tag">#{{ . }}</span>
                            {{ end }}
                        </div>
                    </div>
                </a>
            </article>
            {{ end }}
        </div>
        
        <div class="text-center">
            <a href="/cafes/" class="btn-secondary">æŸ¥çœ‹æ‰€æœ‰å’–å•¡åº—</a>
        </div>
    </div>
</section>

{{- /* Map Section */ -}}
<section class="map-section">
    <div class="container">
        <h2 class="section-title">å’–å•¡åº—åœ°åœ–</h2>
        <div id="cafes-map" style="height: 500px; border-radius: 10px;"></div>
    </div>
</section>

{{- /* Regions */ -}}
<section class="regions">
    <div class="container">
        <h2 class="section-title">æ¢ç´¢åœ°å€</h2>
        
        <div class="regions-grid">
            {{ range .Site.Taxonomies.regions }}
            <a href="{{ .Page.Permalink }}" class="region-card">
                <h3>{{ .Page.Title }}</h3>
                <span class="count">{{ .Count }} å®¶å’–å•¡åº—</span>
            </a>
            {{ end }}
        </div>
    </div>
</section>

{{ end }}
